import*as e from"https://cdnjs.cloudflare.com/ajax/libs/three.js/0.156.1/three.module.min.js";import{GLTFLoader as t}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/loaders/GLTFLoader.js";import{DRACOLoader as n}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/loaders/DRACOLoader.js";import{EffectComposer as o}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/postprocessing/EffectComposer.js";import{RenderPass as a}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/postprocessing/RenderPass.js";import{UnrealBloomPass as i}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/postprocessing/UnrealBloomPass.js";import{ShaderPass as r}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/postprocessing/ShaderPass.js";import{GammaCorrectionShader as s}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/shaders/GammaCorrectionShader.js";import{RGBShiftShader as c}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/shaders/RGBShiftShader.js";import{FXAAShader as l}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/shaders/FXAAShader.js";import{RoomEnvironment as d}from"https://cdn.jsdelivr.net/gh/Leandro201927/LeaInnova_CDN@master/threejs/environments/RoomEnvironment.js";import*as m from"https://cdnjs.cloudflare.com/ajax/libs/tween.js/21.0.0/tween.esm.min.js";loaderHandler.updateProgress("llegue 1");try{registerComponent((async()=>{const u=new URL(import.meta.url),p=new URLSearchParams(u.search),h=p.get("key"),g=p.get("templateUrl"),w=(p.get("componentName"),document.getElementById(h)),f=w.querySelector(".background-gradient-mobile"),v=w.querySelector(".slider-container"),y=w.querySelector(".slide-1"),S=w.querySelector(".slide-2 .slider-image-supercontainer");new AccordionController(y);const C=new SliderController(v),L=new SliderImageController(S),x=new e.Clock,b=new e.Vector3;let M=1;function A(){return window.innerWidth>1366?"desktopL":window.innerWidth<=1366&&window.innerWidth>1024?"desktopM":window.innerWidth<=1024&&window.innerWidth>768?"desktopS":window.innerWidth<=768&&window.innerWidth>425?"tablet":"mobile"}loaderHandler.updateProgress("llegue 2");let E=A();const j=()=>{M+=1;let e=Math.round(M/6*100);loaderHandler.updateProgress(e)};let P,z=1;const T={desktopL:{position:{x:9.89600658416748,y:13.16525993347168,z:13.140523910522461},frustrumSizeCamera:6},desktopM:{position:{x:9.89600658416748,y:13.41525993347168,z:13.640523910522461},frustrumSizeCamera:5.5},desktopS:{position:{x:13.39600658416748,y:12.66525993347168,z:13.640523910522461},frustrumSizeCamera:10},tablet:{position:{x:13.89600658416748,y:12.66525993347168,z:13.640523910522461},frustrumSizeCamera:10},mobile:{position:{x:13.89600658416748,y:12.66525993347168,z:13.640523910522461},frustrumSizeCamera:10}};let R;const I={desktopL:{position:{x:5.167432249854422,y:9,z:13.312374668985601},lookAt:{x:-4.5,y:-.5,z:0},frustrumSizeCamera:2},desktopM:{position:{x:5.167432249854422,y:9,z:13.312374668985601},lookAt:{x:-4.5,y:-.5,z:0},frustrumSizeCamera:2},desktopS:{position:{x:5.167432249854422,y:9,z:13.312374668985601},lookAt:{x:-3.5,y:-1.5,z:0},frustrumSizeCamera:3},tablet:{position:{x:5.167432249854422,y:9,z:13.312374668985601},lookAt:{x:-3.5,y:-1.5,z:0},frustrumSizeCamera:3},mobile:{position:{x:5.167432249854422,y:9,z:13.312374668985601},lookAt:{x:-3.5,y:-1.15,z:0},frustrumSizeCamera:2.5}},W=w.querySelector("canvas#webgl1"),_=w.querySelector("canvas#webgl2");let k=0;C.on("onslidechange",(function(e){if(0===e&&1===k){const t=()=>{W.style.opacity=1,z=1,_.removeEventListener("transitionend",t)};_.addEventListener("transitionend",t);let n={value:T[E].frustrumSizeCamera+1.5},o={value:T[E].frustrumSizeCamera};new m.Tween(n).to(o,1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const e=n.value/2,t=W.clientWidth/W.clientHeight;P.left=-e*t,P.right=e*t,P.top=e,P.bottom=-e,P.updateProjectionMatrix()})).start();let a={value:I[E].frustrumSizeCamera},i={value:I[E].frustrumSizeCamera+.5};new m.Tween(a).to(i,1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const e=a.value/2,t=W.clientWidth/W.clientHeight;R.left=-e*t,R.right=e*t,R.top=e,R.bottom=-e,R.updateProjectionMatrix()})).start(),_.style.opacity=0,k=e}if(1===e){if(0===k){const e=()=>{_.style.opacity=1,z=2,W.removeEventListener("transitionend",e)};W.addEventListener("transitionend",e);let t={value:T[E].frustrumSizeCamera},n={value:T[E].frustrumSizeCamera+1.5};new m.Tween(t).to(n,1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const e=t.value/2,n=W.clientWidth/W.clientHeight;P.left=-e*n,P.right=e*n,P.top=e,P.bottom=-e,P.updateProjectionMatrix()})).start();let o={value:I[E].frustrumSizeCamera+.5},a={value:I[E].frustrumSizeCamera};new m.Tween(o).to(a,1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const e=o.value/2,t=W.clientWidth/W.clientHeight;R.left=-e*t,R.right=e*t,R.top=e,R.bottom=-e,R.updateProjectionMatrix()})).start(),W.style.opacity=0}else if(2===k){if($("close"),"desktopS"!==E&&"tablet"!==E&&"mobile"!==E){const e={value:I[E].frustrumSizeCamera-.5},t={value:I[E].frustrumSizeCamera};new m.Tween(e).to(t,1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const t=e.value/2,n=W.clientWidth/W.clientHeight;R.left=-t*n,R.right=t*n,R.top=t,R.bottom=-t,R.updateProjectionMatrix()})).start()}new m.Tween(b).to({y:I[E].lookAt.y},1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){})).start()}k=e}if(2===e){if($("open",O),"desktopS"!==E&&"tablet"!==E&&"mobile"!==E){const e={value:I[E].frustrumSizeCamera},t={value:I[E].frustrumSizeCamera-.5};new m.Tween(e).to(t,1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const t=e.value/2,n=W.clientWidth/W.clientHeight;R.left=-t*n,R.right=t*n,R.top=t,R.bottom=-t,R.updateProjectionMatrix()})).start()}"desktopS"!==E&&"tablet"!==E&&"mobile"!==E||new m.Tween(b).to({y:b.y+.5},1e3).easing(m.Easing.Quadratic.InOut).onUpdate((function(){})).start(),k=e}}));let O="movier";L.on("preslidechange",(e=>{Z();const t=S.querySelector(`.slider-image-container-${e}`);console.log(e,t.classList),t.classList.contains("movier")?O="movier":t.classList.contains("cproc")&&(O="cproc"),console.log(O)})),L.on("slidechange",(e=>{X(O)}));const B={width:_.clientWidth,height:_.clientHeight},H=new e.WebGLRenderer({canvas:W,antialias:!0,alpha:!0});H.setSize(B.width,B.height),H.setPixelRatio(window.devicePixelRatio),H.outputColorSpace=e.SRGBColorSpace,H.physicallyCorrectLights=!0,H.toneMapping=e.LinearToneMapping,H.toneMappingExposure=1.04,H.setSize(B.width,B.height),H.setPixelRatio(window.devicePixelRatio);const U=new e.PMREMGenerator(H),F=new e.TextureLoader,D=new n;D.setDecoderPath(`${g}/js/lib/draco/`);const N=new t;N.setDRACOLoader(D);const Q=(t,n=!1)=>new Promise(((o,a)=>{(new e.TextureLoader).load(t,(t=>{t.flipY=n,t.colorSpace=e.SRGBColorSpace,o(t)}),void 0,(e=>a(e)))}));let V,q;const{RAF_2:G,preLoadResources:Y,enable3rdSectionAnimations:$,projectImgOrVideoInLaptopScreen:X,shutDownLaptopScreen:Z}=function(){let t,n,d,u,p,h,w,f,v,y={},S=["ScreenPlateAction","ScreenAction.001","ALogoAction"],C=!0;const M=new e.MeshPhongMaterial({emissive:65423,emissiveIntensity:1.8,transparent:!0,opacity:0}),j=new e.Scene;function P(e){w&&(e?(w.visible=!1,C=!1):(w.visible=!0,C=!0))}function z(t){if(!t)return;let n;if("movier"===t){const t=document.createElement("video");t.src=`${g}/assets/3d/homepage/movier.mp4`,t.crossOrigin="anonymous",t.play(),t.muted=!0,v=t,n=new e.VideoTexture(t),P(!1)}else{{const t=document.getElementById("cproc-img");v=t,n=(new e.TextureLoader).load(t.src),P(!0)}}n.minFilter=e.LinearFilter,n.magFilter=e.LinearFilter,n.flipY=!1,e.ShaderLib.customVideoShader={uniforms:{tDiffuse:{type:"t",value:null},brightness:{type:"f",value:0},contrast:{type:"f",value:0}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform sampler2D tDiffuse;\n            uniform float brightness;\n            uniform float contrast;\n            varying vec2 vUv;\n            void main() {\n              vec4 color = texture2D(tDiffuse, vUv);\n              color.rgb += brightness;\n              if (contrast > 0.0) {\n                color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n              } else {\n                color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n              }\n              gl_FragColor = color;\n            }\n          "};const o=new e.ShaderMaterial({uniforms:e.UniformsUtils.clone(e.ShaderLib.customVideoShader.uniforms),vertexShader:e.ShaderLib.customVideoShader.vertexShader,fragmentShader:e.ShaderLib.customVideoShader.fragmentShader});o.uniforms.tDiffuse.value=n,o.uniforms.brightness.value=-.3,o.uniforms.contrast.value=-.4,f.material=o}const T={x:0,y:0};let W=null;window.addEventListener("mousemove",(e=>{T.x=e.clientX/window.innerWidth*2-1,T.y=-e.clientY/window.innerHeight*2+1}));const O=new e.Raycaster,H=new e.Vector2;let U=null;return window.addEventListener("mousemove",(e=>{H.x=e.clientX/window.innerWidth*2-1,H.y=-e.clientY/window.innerHeight*2+1}),!1),window.addEventListener("click",(()=>{O.setFromCamera(H,R);const e=O.intersectObjects(j.children,!0);for(let t=0;t<e.length;t++)if("RaycastHoverArrowNext"===e[t].object.name)L.nextPage(),console.log("arrownext");else if("RaycastHoverArrowPrev"===e[t].object.name)L.prevPage(),console.log("arrowprev");else if("RaycastHoverRepeat"===e[t].object.name)try{v.pause(),v.currentTime="0",v.play()}catch(e){console.warn("No es un video.")}}),!1),{RAF_2:function(){if(t){t.scene.rotation.y+=64e-5*(T.x-18*t.scene.rotation.y-0);T.y,b.y;R.lookAt(b)}let e=null;O.setFromCamera(H,R);const o=O.intersectObjects(j.children,!0);for(let t=0;t<o.length;t++)if("RaycastHoverArrowPrev"===o[t].object.name||"RaycastHoverArrowNext"===o[t].object.name||"RaycastHoverRepeat"===o[t].object.name){document.body.style.cursor="pointer";switch(o[t].object.name){case"RaycastHoverArrowPrev":e=h;break;case"RaycastHoverArrowNext":e=p;break;case"RaycastHoverRepeat":C||(document.body.style.cursor="default"),e=w}break}e?U!==e&&(!U||W&&W.isPlaying()||(W=new m.Tween(U.scale).to({x:1,y:1,z:1},250).easing(m.Easing.Quadratic.Out).start()),U=e,W=new m.Tween(U.scale).to({x:1.15,y:1.15,z:1.15},250).easing(m.Easing.Quadratic.Out).start()):(document.body.style.cursor="default",!U||W&&W.isPlaying()||(W=new m.Tween(U.scale).to({x:1,y:1,z:1},500).easing(m.Easing.Quadratic.Out).onComplete((()=>{U=null})).start())),d&&d.render(),n&&n.update(x.getDelta())},preLoadResources:function(){const m=F.load(`${g}/assets/3d/homepage/laptop_4k_baked.webp`,(()=>{m.flipY=!1,m.colorSpace=e.SRGBColorSpace})),v=new e.MeshPhongMaterial({emissive:65423,emissiveIntensity:1.8});new Promise(((n,o)=>{N.load(`${g}/assets/3d/homepage/105-laptop.glb`,(o=>{t=o;let a=o.scene.children.length,i=0;o.animations&&(u=o.animations.filter((e=>S.includes(e.name)))),o.scene.traverse((t=>{if(i++,t instanceof e.Mesh){if(console.log(t.name),t.material=new e.MeshBasicMaterial({map:m}),"Plane002_1"===t.name&&(t.material=new e.MeshStandardMaterial({color:3947580,envMap:q})),"Plane002_2"===t.name&&(t.material=v),"ALogo"===t.name&&(t.material=v),"RaycastHoverArrowPrev"!==t.name&&"RaycastHoverArrowNext"!==t.name&&"RaycastHoverRepeat"!==t.name||(t.material=new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:0})),"ArrowNext"===t.name||"ArrowPrev"===t.name||"Repeat"===t.name){switch(t.name){case"ArrowNext":p=t;break;case"ArrowPrev":h=t;break;case"Repeat":w=t}t.material=M}"Screen"===t.name&&(f=t)}i===a&&n()})),j.add(o.scene)}))})).then((()=>{n=new e.AnimationMixer(t.scene),n.timeScale=2,u.forEach((t=>{let o=n.clipAction(t);o.enabled=!0,o.setLoop(e.LoopOnce),o.clampWhenFinished=!0,o.setEffectiveTimeScale(1),o.setEffectiveWeight(1),y[t.name]={action:o}}))})),window.addEventListener("resize",(function(){B.width=_.clientWidth,B.height=_.clientHeight,E=A();let t=new e.Vector3(I[E].position.x,I[E].position.y,I[E].position.z);R.position.copy(t),b.x=I[E].lookAt.x,b.y="desktopS"!==E&&"tablet"!==E&&"mobile"!==E||2!==k?I[E].lookAt.y:I[E].lookAt.y+.5,b.z=I[E].lookAt.z,R.lookAt(b.x,b.y,b.z);const n=B.width/B.height,o=I[E].frustrumSizeCamera/2,a=-o*n,i=o*n,r=o,s=-o;R.left=a,R.right=i,R.top=r,R.bottom=s,R.near=-100,R.far=1e3,R.updateProjectionMatrix(),x.setSize(B.width,B.height),d.setSize(B.width,B.height),x.setPixelRatio(window.devicePixelRatio)}));const C=B.width/B.height,L=I[E].frustrumSizeCamera/2;R=new e.OrthographicCamera(-L*C,L*C,L,-L,-100,1e3),b.x=I[E].lookAt.x,b.y=I[E].lookAt.y,b.z=I[E].lookAt.z,R.position.set(I[E].position.x,I[E].position.y,I[E].position.z),R.rotation.order="XYZ",R.rotation.set(0,0,0),R.lookAt(b.x,b.y,b.z),j.add(R);const x=new e.WebGLRenderer({canvas:_,antialias:!0});x.setSize(B.width,B.height),x.setPixelRatio(window.devicePixelRatio),x.outputColorSpace=e.SRGBColorSpace,x.physicallyCorrectLights=!0,x.toneMapping=e.LinearToneMapping,x.toneMappingExposure=1.04,d=new o(x),d.setSize(B.width,B.height),d.setPixelRatio(1);const P=new a(j,R),z=new i;z.strength=.22,z.radius=.2,z.threshold=1;const T=new r(s),W=new r(l);W.uniforms.resolution.value.set(1/B.width,1/B.height),W.material.uniforms.resolution.value.x=1/B.width,W.material.uniforms.resolution.value.y=1/B.height;const O=new r(c);O.uniforms.amount.value=.0015,O.uniforms.angle.value=0,d.addPass(P),d.addPass(z),d.addPass(T)},enable3rdSectionAnimations:function(t,o=null){if("open"===t){a=y,Object.entries(a).forEach((([e,t])=>{const n=t.action;n.reset(),n.setEffectiveTimeScale(1),n.play()})),f.material=new e.MeshBasicMaterial({color:0});const t=e=>{"ScreenAction.001"===e.action.getClip().name&&(new m.Tween(M).to({opacity:1,emissiveIntensity:1.8},250).easing(m.Easing.Quadratic.Out).start(),f&&z(o),n.removeEventListener("finished",t))};n.addEventListener("finished",t)}else"close"===t&&(!function(e){Object.entries(e).forEach((([e,t])=>{const n=t.action;let o=n.getClip().duration;n.reset(),n.time=o,n.setEffectiveTimeScale(-1),n.play()}))}(y),new m.Tween(M).to({opacity:0,emissiveIntensity:0},250).easing(m.Easing.Quadratic.Out).start(),f&&(f.material=new e.MeshBasicMaterial({color:0})));var a},projectImgOrVideoInLaptopScreen:z,shutDownLaptopScreen:function(){f.material=new e.MeshBasicMaterial({color:2632740})}}}(),{RAF_1:J}=await async function(t){let n,u,p=[];const h=new e.Scene,w=await Q(`${g}/assets/3d/homepage/delivery-machine-4k-baked-ultra-compress.webp`);j();const v=await Q(`${g}/assets/3d/homepage/crate_baked.webp`);j();const y=new e.MeshBasicMaterial({map:v}),S=new e.MeshBasicMaterial({map:w});F.load(`${g}/assets/3d/homepage/kloppenheim_02_4k.jpg`,(function(t){t.mapping=e.EquirectangularReflectionMapping,t.colorSpace=e.SRGBColorSpace,q=t,j()})),V=U.fromScene(new d,.04).texture;const L=F.load(`${g}/assets/3d/homepage/white.png`,(t=>{w.flipY=!1,w.colorSpace=e.SRGBColorSpace,j()})),b=new e.ShaderMaterial({uniforms:{texture1:{type:"t",value:L},texture2:{type:"t",value:w},transition:{type:"f",value:0}},vertexShader:"\n          varying vec2 vUv;\n          void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          }\n        ",fragmentShader:"\n          uniform sampler2D texture1;\n          uniform sampler2D texture2;\n          uniform float transition;\n          varying vec2 vUv;\n          void main() {\n            vec4 tex1 = texture2D(texture1, vUv);\n            vec4 tex2 = texture2D(texture2, vUv);\n            gl_FragColor = mix(tex1, tex2, transition);\n            gl_FragColor.a = 1.0; // Asegura que la salida no sea transparente\n          }\n        "}),M=new e.MeshPhongMaterial({emissive:65423,emissiveIntensity:0}),z=new e.MeshPhongMaterial({emissive:65423,emissiveIntensity:1,transparent:!0,opacity:0}),R=[];let I,_,k,O,B={},D={},G=["SpawnUpperConveyorBelt","SpawnLowerConveyorBelt","SpawnLTransformMachine","SpawnTransformMachine","SpawnALogo","SpawnALogoContainer","SpawnTuNegocioCover","SpawnTuNegocio"],Y={},$=["CycleTranslateUpperConveyorBelt","CycleTranslateLowerConveyorBelt","CicleFloatingLogoContainer","CicleFloatingLogo","CicleFloatingTuNegocioCover","CicleFloatingTuNegocio"],X={},Z=["CrateAction","MegaphoneAction.001","AIBotAction","WWW_InternetAction"];function J(){let e=["MegaphoneAction.001","AIBotAction","WWW_InternetAction"],t=0;function n(){const o=a=>{"CrateAction"===a.action.getClip().name&&(u.removeEventListener("finished",o),function(){const o=a=>{const i=a.action.getClip().name;"AIBotAction"!==i&&"WWW_InternetAction"!==i&&"MegaphoneAction.001"!==i||(u.removeEventListener("finished",o),t=t+1>e.length-1?0:t+1,n())};u.addEventListener("finished",o),le(X,e[t])}())};u.addEventListener("finished",o),le(X,"CrateAction")}n()}const K=20.8,ee=100,te=28.6,ne=new e.PointLight(255,1e4,100);ne.position.set(K,ee,te),h.add(ne);const oe=new e.Raycaster,ae=new e.Vector2,ie=new e.Vector2;let re,se;function ce(e){Object.entries(e).forEach((([e,t])=>{const n=t.action;n.reset(),n.setEffectiveTimeScale(1),n.play()}))}function le(e,t){console.log("intentando reproducir accion",t);const n=e[t].action;n.reset(),n.setEffectiveTimeScale(1),n.play()}document.addEventListener("mousemove",(function(e){ae.x=e.clientX/window.innerWidth*2-1,ae.y=-e.clientY/window.innerHeight*2+1,ie.x=e.clientX,ie.y=e.clientY}),!1),new Promise(((t,o)=>{W.style.opacity=0,N.load(`${g}/assets/3d/homepage/delivery machine addon + animation.glb`,(o=>{n=o;let a=o.scene.children.length,i=0;if(o.animations&&(I=o.animations.filter((e=>"PenroseInitRotate"===e.name)),_=o.animations.filter((e=>G.includes(e.name))),k=o.animations.filter((e=>$.includes(e.name))),O=o.animations.filter((e=>Z.includes(e.name)))),o.cameras.length){const t=o.cameras[0];let n=new e.Vector3(T[E].position.x,T[E].position.y,T[E].position.z);console.log("camera1Positions[actualScreenSize]",T[E],E);let a=t.quaternion;P.position.copy(n),P.quaternion.copy(a)}o.scene.traverse((n=>{if(i++,n instanceof e.Mesh){n.material=S,(n.name.includes("Crate")||n.name.includes("Megaphone")||n.name.includes("AIBot")||n.name.includes("WWW_Internet"))&&(n.material=y),"TransformMachine_1"===n.name&&(re=n),"LTransformMachine_3"===n.name&&(se=n),"TransformMachine_1"!==n.name&&"LTransformMachine_3"!==n.name||(n.material=new e.MeshStandardMaterial({color:65423,transparent:!0,opacity:.06,envMap:V,envMapIntensity:1,depthWrite:!1,side:e.FrontSide})),"WWW_Internet_3"!==n.name&&"AIBot_3"!==n.name||(n.material=new e.MeshBasicMaterial({color:0})),n.name.includes("PenroseTriangle")&&(p.push(n),"PenroseTriangle_1"===n.name?n.material=b:n.material=M),"LowerConveyorBelt_1"!==n.name&&"UpperConveyorBelt_1"!==n.name||(n.receiveShadow=!0,n.material=new e.MeshBasicMaterial({color:3355443})),"Megaphone_2"!==n.name&&"AIBot_2"!==n.name&&"WWW_Internet_2"!==n.name||(n.material=new e.MeshPhongMaterial({emissive:65423,emissiveIntensity:1.5})),["ALogo","UpperConveyorBelt_2","LowerConveyorBelt_2","TransformMachine_2","TuNegocioText","LTransformMachine_2","Crate_2"].includes(n.name)&&(n.material=z),["Floor","AIBot","WWW_Internet","Megaphone","Crate","LowerConveyorBelt","UpperConveyorBelt"].some((e=>n.name.includes(e)))&&(n.material.transparent=!0,n.material.opacity=0,R.push(n))}i===a&&t()})),h.add(o.scene)}))})).then((()=>{j(),t(),u=new e.AnimationMixer(n.scene),u.timeScale=1.25,I.forEach((t=>{let n=u.clipAction(t);n.enabled=!0,n.setLoop(e.LoopOnce),n.clampWhenFinished=!0,n.setEffectiveTimeScale(1),n.setEffectiveWeight(1),B[t.name]={action:n}})),_.forEach((t=>{let n=u.clipAction(t);n.enabled=!0,n.setLoop(e.LoopOnce),n.clampWhenFinished=!0,n.setEffectiveTimeScale(1),n.setEffectiveWeight(1),D[t.name]={action:n}})),k.forEach((t=>{let n=u.clipAction(t);n.enabled=!0,n.setLoop(e.LoopRepeat),n.clampWhenFinished=!0,n.setEffectiveTimeScale(1),n.setEffectiveWeight(1),Y[t.name]={action:n}})),O.forEach((t=>{let n=u.clipAction(t);n.enabled=!0,n.setLoop(e.LoopOnce),n.clampWhenFinished=!0,n.setEffectiveTimeScale(1),n.setEffectiveWeight(1),X[t.name]={action:n}})),setTimeout((()=>{document.querySelector("header").style.transform="translateY(0px)",u.addEventListener("finished",(function(e){const t=e.action.getClip().name;"PenroseInitRotate"===t?(f.classList.add("show"),new m.Tween(b.uniforms.transition).to({value:1},500).easing(m.Easing.Quadratic.InOut).onComplete((()=>{})).start(),new m.Tween(M).to({emissiveIntensity:1.25},500).easing(m.Easing.Quadratic.InOut).onComplete((()=>{})).start(),R.forEach((e=>{new m.Tween(e.material).to({opacity:1},700).easing(m.Easing.Quadratic.InOut).onComplete((()=>{})).start()}))):"SpawnLTransformMachine"===t&&(ce(Y),C.renderFirstSlide())})),ce(B),ce(D);let e={value:45},t={value:T[E].frustrumSizeCamera};new m.Tween(e).to(t,1500).easing(m.Easing.Quadratic.InOut).onUpdate((function(){const t=e.value/2;P.left=-t*me,P.right=t*me,P.top=t,P.bottom=-t,P.updateProjectionMatrix()})).onComplete((function(){J()})).start()}),1e3);const o=loaderHandler.getLoaderParentElement();new m.Tween(o.style).to({opacity:0},500).easing(m.Easing.Quadratic.InOut).onComplete((()=>{o.style.display="none",W.style.opacity=1})).start()}));const de={width:W.clientWidth,height:W.clientHeight};window.addEventListener("resize",(function(){de.width=W.clientWidth,de.height=W.clientHeight,E=A();let t=new e.Vector3(T[E].position.x,T[E].position.y,T[E].position.z);P.position.copy(t);const n=de.width/de.height,o=T[E].frustrumSizeCamera/2,a=-o*n,i=o*n,r=o,s=-o;P.left=a,P.right=i,P.top=r,P.bottom=s,P.near=-100,P.far=1e3,P.updateProjectionMatrix(),H.setSize(de.width,de.height),pe.setSize(de.width,de.height),H.setPixelRatio(window.devicePixelRatio)})),new e.Vector3;const me=W.clientWidth/W.clientHeight,ue=22.5;P=new e.OrthographicCamera(-22.5*me,ue*me,ue,-22.5,-100,1e3),h.add(P);const pe=new o(H);pe.setPixelRatio(1);const he=new a(h,P),ge=new i;ge.strength=.29,ge.radius=1,ge.threshold=.754;const we=new r(s),fe=new r(l);fe.uniforms.resolution.value.set(1/de.width,1/de.height),fe.material.uniforms.resolution.value.x=1/de.width,fe.material.uniforms.resolution.value.y=1/de.height;const ve=new r(c);ve.uniforms.amount.value=.0015,ve.uniforms.angle.value=0,pe.addPass(he),pe.addPass(ge),pe.addPass(we),pe.addPass(fe);let ye,Se,Ce=!0,Le=!0;const xe=new e.Color(65423),be=new e.Color(11270143),Me={t:0};return new m.Tween(Me).to({t:1},0).onUpdate((function(){re.material.color.lerpColors(xe,be,Me.t),se.material.color.lerpColors(xe,be,Me.t)})),new m.Tween(Me).to({t:0},100).onUpdate((function(){re.material.color.lerpColors(xe,be,Me.t),se.material.color.lerpColors(xe,be,Me.t)})),{RAF_1:function(){let e=ie.y/window.innerHeight*200-100;ne.position.setY(e),Se=ye||!1,ye=function(){oe.setFromCamera(ae,P);const e=oe.intersectObjects(h.children);let t=!1;for(let n=0;n<e.length;n++)if("PenroseTriangle_1"===e[n].object.name||"PenroseTriangle_2"===e[n].object.name||e[n].object.name.includes("TransformMachine")||e[n].object.name.includes("LTransformMachine")){t=!0;break}return t}(),!1===ye?Ce&&(Ce=!1,new m.Tween(ne).to({intensity:0},250).easing(m.Easing.Quadratic.InOut).onComplete((()=>{Ce=!0})).start()):!0===ye&&Le&&(Le=!1,new m.Tween(ne).to({intensity:1e4},250).easing(m.Easing.Quadratic.InOut).onComplete((()=>{Le=!0})).start()),pe.render(),u&&u.update(x.getDelta())}}}(Y),K=()=>{m.update(),1===z&&J?J():2===z&&G&&G(),window.requestAnimationFrame(K)};K()}))}catch(e){console.error("Errorrr: ",e)}
